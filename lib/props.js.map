{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/props.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nprops                     = @\nno_such_value             = Symbol 'no_such_value'\nH                         = require './_helpers'\nbuiltins                  = require './_builtins'\n\n\n#-----------------------------------------------------------------------------------------------------------\nH.types.declare 'guy_props_keys_cfg', tests:\n  \"@isa.object x\":                                                    ( x ) -> @isa.object x\n  \"@isa_optional.cardinal x.depth\":                                   ( x ) -> @isa_optional.cardinal x.depth\n  \"@isa.boolean x.symbols\":                                           ( x ) -> @isa.boolean x.symbols\n  \"@isa.boolean x.hidden\":                                            ( x ) -> @isa.boolean x.hidden\n  \"@isa.boolean x.builtins\":                                          ( x ) -> @isa.boolean x.builtins\n  \"@isa.boolean x.builtins implies x.hidden\":                         ( x ) ->\n    return ( not x.builtins ) or ( x.hidden )\n#...........................................................................................................\nH.types.defaults.guy_props_keys_cfg =\n  symbols:  false\n  builtins: false\n  hidden:   false\n  depth:    null\n\n#-----------------------------------------------------------------------------------------------------------\n@_misfit = misfit = Symbol 'misfit'\n\n#-----------------------------------------------------------------------------------------------------------\n@def  = def   = Object.defineProperty\n@hide = hide  = ( object, name, value ) => Object.defineProperty object, name, { enumerable: false, value, }\n\n#-----------------------------------------------------------------------------------------------------------\n@def_oneoff = def_oneoff = ( object, name, cfg, method ) =>\n  get = ->\n    R = method.apply object\n    delete cfg.get\n    def object, name,\n      configurable: ( cfg.configurable  ? true )\n      enumerable:   ( cfg.enumerable    ? true )\n      value:        R\n    return R\n  def object, name, { enumerable: true, configurable: true, get, }\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_pick_with_fallback = ( d, fallback, keys... ) ->\n  R     = {}\n  keys  = keys.flat Infinity\n  for key in keys\n    R[ key ] = if ( value = d[ key ] ) is undefined then fallback else value\n  return [ R, keys, ]\n\n#-----------------------------------------------------------------------------------------------------------\n@pick_with_fallback = ( d, fallback, keys... ) -> ( @_pick_with_fallback d, fallback, keys )[ 0 ]\n\n#-----------------------------------------------------------------------------------------------------------\n@pluck_with_fallback = ( d, fallback, keys... ) ->\n  [ R, keys, ] = @_pick_with_fallback d, fallback, keys...\n  delete d[ key ] for key in keys\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@nullify_undefined = ( d ) ->\n  R       = {}\n  R[ k ]  = ( v ? null ) for k, v of d\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@omit_nullish = ( d ) ->\n  R       = {}\n  R[ k ]  = v for k, v of d when v?\n  return R\n\n\n#===========================================================================================================\nclass @Strict_owner\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg ) ->\n    ### thx to https://stackoverflow.com/a/40714458/7568091 ###\n    cfg   = { target: @, cfg..., }\n    #.......................................................................................................\n    R = new Proxy cfg.target,\n      #.....................................................................................................\n      get: ( target, key ) =>\n        return undefined if key is Symbol.toStringTag\n        if ( value = props.get target, key, no_such_value ) is no_such_value\n          throw new Error \"^guy.props.Strict_owner@1^ #{@constructor.name} instance does not have property #{rpr key}\"\n        return value\n    #.......................................................................................................\n    return R\n\n\n#===========================================================================================================\n# KEY TESTING, RETRIEVAL, CATALOGUING\n#-----------------------------------------------------------------------------------------------------------\n@has = ( target, key ) =>\n  ### safe version of `Reflect.has()` that never throws an error ###\n  try return Reflect.has target, key catch error then return false\n\n#-----------------------------------------------------------------------------------------------------------\n@get = ( target, key, fallback = misfit ) =>\n  return target[ key ] if @has target, key\n  return fallback unless fallback is misfit\n  throw new Error \"^guy.props.get@1^ no such property #{rpr key}\"\n\n#-----------------------------------------------------------------------------------------------------------\n@keys = ( owner, cfg ) ->\n  has_hidden  = ( cfg ? {} ).hidden?\n  cfg         = { H.types.defaults.guy_props_keys_cfg..., cfg..., }\n  cfg.hidden  = true if not has_hidden and cfg.builtins\n  H.types.validate.guy_props_keys_cfg cfg\n  return [ ( @_walk_keys owner, cfg )..., ]\n\n#-----------------------------------------------------------------------------------------------------------\n@walk_keys = ( owner, cfg ) ->\n  has_hidden  = ( cfg ? {} ).hidden?\n  cfg         = { H.types.defaults.guy_props_keys_cfg..., cfg..., }\n  cfg.hidden  = true if not has_hidden and cfg.builtins\n  H.types.validate.guy_props_keys_cfg cfg\n  return @_walk_keys owner, cfg\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_keys = ( owner, cfg ) ->\n  seen = new Set()\n  for { key, } from @_walk_keyowners owner, cfg, 0\n    continue if seen.has key\n    seen.add key\n    yield key\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_keyowners = ( owner, cfg, depth ) ->\n  # urge '^3354^', owner\n  return null if cfg.depth? and depth > cfg.depth\n  return null if ( not cfg.builtins ) and builtins.has owner\n  for key in Reflect.ownKeys owner\n    continue if ( not cfg.symbols ) and ( H.types.isa.symbol key )\n    d = Object.getOwnPropertyDescriptor owner, key\n    continue if ( not cfg.hidden ) and ( not d.enumerable )\n    yield { key, owner, }\n  #.........................................................................................................\n  if ( proto_owner = Object.getPrototypeOf owner )?\n    yield from @_walk_keyowners proto_owner, cfg, depth + 1\n  return null\n\n"
  ]
}